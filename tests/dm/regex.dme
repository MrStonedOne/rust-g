#include "common.dm"

/test/proc/regex_global()
    var/datum/rustg_regex/re_global = new("a(.)c", "g")

    TEST_ASSERT_EQUAL(re_global.Find("abc adc"), 1)
    TEST_ASSERT_EQUAL(re_global.next, 4)

    TEST_ASSERT_EQUAL(re_global.group.len, 1)
    TEST_ASSERT_EQUAL(re_global.group[1], "b")

    TEST_ASSERT_EQUAL(re_global.Find("abc adc"), 5)
    TEST_ASSERT_EQUAL(re_global.next, 8)

    TEST_ASSERT_EQUAL(re_global.group.len, 1)
    TEST_ASSERT_EQUAL(re_global.group[1], "d")
